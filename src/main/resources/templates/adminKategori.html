<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{layoutAdmin :: layoutAdmin(~{::title}, ~{::main})}">

<head>
    <title>Dashboard - Donaskuy</title>
</head>

<main>
   <h3>CRUD Category Program</h3>
    <form th:action="@{/admin/category/add}" method="post">
        <input type="text" name="name" placeholder="Nama Category" required>
        <input type="text" name="description" placeholder="Deskripsi" required>
        <button type="submit">Tambah</button>
    </form>
    <ul>
        <li th:each="cat : ${categories}">
            <span th:text="${cat.name}"></span> - <span th:text="${cat.description}"></span>
            <form th:action="@{/admin/category/delete}" method="post" style="display:inline;">
                <input type="hidden" name="id" th:value="${cat.id}">
                <button type="submit">Hapus</button>
            </form>
            <!-- Tombol Edit (toggle form) -->
            <button type="button"
                th:onclick="'document.getElementById(\'edit-cat-\' + ' + ${cat.id} + ').style.display=\'block\''">Edit</button>
            <!-- Form Edit -->
            <form th:id="'edit-cat-' + ${cat.id}" th:action="@{/admin/category/edit}" method="post"
                style="display:none; margin-top:5px;">
                <input type="hidden" name="id" th:value="${cat.id}">
                <input type="text" name="name" th:value="${cat.name}" required>
                <input type="text" name="description" th:value="${cat.description}" required>
                <button type="submit">Simpan</button>
                <button type="button" onclick="this.parentElement.style.display='none'">Batal</button>
            </form>
        </li>
    </ul>
</main>

</html>