<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{layoutAdmin :: layoutAdmin(~{::title}, ~{::main})}">

<head>
    <title>Manajemen Kategori - Donaskuy</title>
</head>

<main>
    <div class="bg-white rounded-xl shadow-soft p-6">
        <div class="flex items-center gap-4 mb-6">
            <div class="w-12 h-12 rounded-xl bg-primary-100 flex items-center justify-center">
                <i class="fas fa-tags text-primary-600 text-xl"></i>
            </div>
            <div>
                <h3 class="text-xl font-semibold text-gray-800">Manajemen Kategori</h3>
                <p class="text-sm text-gray-500">Kelola kategori program donasi</p>
            </div>
        </div>

        <!-- Form Tambah Kategori -->
        <div class="mb-8 p-6 bg-gradient-to-r from-primary-50 to-primary-100 rounded-xl border border-primary-200">
            <h4 class="text-lg font-medium mb-4">Tambah Kategori Baru</h4>
            <form th:action="@{/admin/category/add}" method="post" class="flex gap-4">
                <input type="text" name="name" placeholder="Nama Kategori" required
                    class="flex-1 px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-300 focus:border-primary-300">
                <input type="text" name="description" placeholder="Deskripsi" required
                    class="flex-1 px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-300 focus:border-primary-300">
                <button type="submit"
                    class="px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors duration-200 flex items-center gap-2">
                    <i class="fas fa-plus"></i>
                    <span>Tambah</span>
                </button>
            </form>
        </div>

        <!-- Daftar Kategori -->
        <div class="space-y-4">
            <div th:each="cat : ${categories}" 
                class="p-4 bg-white rounded-lg border border-gray-200 hover:border-primary-200 transition-all duration-200">
                <div class="flex items-center justify-between">
                    <div>
                        <h5 class="font-medium text-gray-800" th:text="${cat.name}"></h5>
                        <p class="text-sm text-gray-500" th:text="${cat.description}"></p>
                    </div>
                    <div class="flex items-center gap-2">
                        <button type="button"
                            th:onclick="'document.getElementById(\'edit-cat-\' + ' + ${cat.id} + ').classList.toggle(\'hidden\')'"
                            class="px-4 py-2 text-primary-600 bg-primary-50 rounded-lg hover:bg-primary-100 transition-colors duration-200">
                            <i class="fas fa-edit"></i>
                            <span>Edit</span>
                        </button>
                        <form th:action="@{/admin/category/delete}" method="post" class="inline">
                            <input type="hidden" name="id" th:value="${cat.id}">
                            <button type="submit"
                                class="px-4 py-2 text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition-colors duration-200">
                                <i class="fas fa-trash"></i>
                                <span>Hapus</span>
                            </button>
                        </form>
                    </div>
                </div>

                <!-- Form Edit (Hidden by default) -->
                <form th:id="'edit-cat-' + ${cat.id}" th:action="@{/admin/category/edit}" method="post"
                    class="hidden mt-4 p-4 bg-gray-50 rounded-lg border border-gray-200">
                    <div class="flex gap-4">
                        <input type="hidden" name="id" th:value="${cat.id}">
                        <input type="text" name="name" th:value="${cat.name}" required
                            class="flex-1 px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-300 focus:border-primary-300">
                        <input type="text" name="description" th:value="${cat.description}" required
                            class="flex-1 px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-300 focus:border-primary-300">
                        <button type="submit"
                            class="px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors duration-200">
                            Simpan
                        </button>
                        <button type="button"
                            th:onclick="'document.getElementById(\'edit-cat-\' + ' + ${cat.id} + ').classList.add(\'hidden\')'"
                            class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors duration-200">
                            Batal
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</main>

</html>